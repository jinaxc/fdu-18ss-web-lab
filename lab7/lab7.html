<html>
  <head>
    <title>Chapter 10</title>
    <link rel="stylesheet" href="lab7.css" />
    <script type="text/javascript" src="jquery-3.4.1.js"></script>
  </head>
  <body class="tiled">
    <header>
      <h1>Art Filters</h1>
    </header>
    <main>
      <div id="sliderBox">
        <form>
          <label>Opacity: </label>
          <p>
            <input
              type="range"
              id="sliderOpacity"
              min="0"
              max="100"
              value="100"
              class="sliders"
            />
            <span id="numOpacity">100</span>%
          </p>
          <p>
            <label>Saturation: </label
            ><input
              type="range"
              id="sliderSaturation"
              min="1"
              max="300"
              value="100"
              class="sliders"
            />
            <span id="numSaturation">100</span>%
          </p>
          <p>
            <label>Brightness: </label
            ><input
              type="range"
              id="sliderBrightness"
              min="0"
              max="300"
              value="100"
              class="sliders"
            />
            <span id="numBrightness">100</span>%
          </p>
          <p>
            <label>Hue Rotate: </label
            ><input
              type="range"
              id="sliderHue"
              min="0"
              max="360"
              value="0"
              class="sliders"
            />
            <span id="numHue">0</span>deg
          </p>
          <p>
            <label>Grayscale: </label
            ><input
              type="range"
              id="sliderGray"
              min="0"
              max="100"
              value="0"
              class="sliders"
            />
            <span id="numGray">0</span>%
          </p>
          <p>
            <label>Blur: </label
            ><input
              type="range"
              id="sliderBlur"
              min="0"
              max="10"
              value="0"
              class="sliders"
            />
            <span id="numBlur">0</span>px
          </p>
          <p><button id="resetFilters">Reset</button></p>
        </form>
      </div>
      <figure id="imgManipulated">
        <img src="images/medium/painting1.jpg" />
        <figcaption>
          <em>Still Life with Flowers in a Glass Vase</em> <br />
          Jan Davidsz. de Heem, 1650 - 1683
        </figcaption>
      </figure>
      <div id="thumbBox">
        <div>
          <img
            src="images/small/painting1.jpg"
            alt="Still Life with Flowers in a Glass Vase"
            title="Jan Davidsz. de Heem, 1650 - 1683"
          />
        </div>
        <div>
          <img
            src="images/small/painting2.jpg"
            alt="Portrait of Alida Christina Assink"
            title="Jan Adam Kruseman, 1833"
          />
        </div>
        <div>
          <img
            src="images/small/painting3.jpg"
            alt="Self-portrait"
            title="Vincent van Gogh, 1887"
          />
        </div>
        <div>
          <img
            src="images/small/painting4.jpg"
            alt="William II, Prince of Orange, and his Bride, Mary Stuart"
            title="Anthony van Dyck, 1641"
          />
        </div>
        <div>
          <img
            src="images/small/painting5.jpg"
            alt="Milkmaid"
            title="Johannes Vermeer, c. 1660"
          />
        </div>
      </div>
    </main>
    <script>
      $("#thumbBox img").on("click", function() {
        let src = $(this).attr("src");
        let newSrc = src.replace("small", "medium");
        $("#imgManipulated img").attr("src", newSrc);
        $("#imgManipulated figcaption em").html($(this).attr("title"));
        $("#imgManipulated figcaption :last-child").html($(this).attr("alt"));
      });
      $("#sliderBox form").bind("input propertychange", function(event) {
        switch ($(event.target).attr("id")) {
          case "sliderOpacity":
            $(event.target.nextElementSibling).html(event.target.value);
            break;
          case "sliderSaturation":
            $(event.target.nextElementSibling).html(event.target.value);
            break;
          case "sliderBrightness":
            $(event.target.nextElementSibling).html(event.target.value);
            break;
          case "sliderHue":
            $(event.target.nextElementSibling).html(event.target.value);
            break;
          case "sliderGray":
            $(event.target.nextElementSibling).html(event.target.value);
            break;
          case "sliderBlur":
            $(event.target.nextElementSibling).html(event.target.value);
            break;
        }
        let opacity = $("#sliderOpacity")[0].value;
        let saturation = $("#sliderSaturation")[0].value;
        let brightness = $("#sliderBrightness")[0].value;
        let hue = $("#sliderHue")[0].value;
        let gray = $("#sliderGray")[0].value;
        let blur = $("#sliderBlur")[0].value;
        $("#imgManipulated img").css({
          filter: `opacity(${opacity}%) saturate(${saturation}%) brightness(${brightness}%) hue-rotate(${hue}deg) grayscale(${gray}%) blur(${blur}px)`,
          WebkitFilter: `opacity(${opacity}%) saturate(${saturation}%) brightness(${brightness}%) hue-rotate(${hue}deg) grayscale(${gray}%) blur(${blur}px)`,
        });
      });
      $("#resetFilters").on("click",function(event){
          event.preventDefault();
          $("#imgManipulated img").attr("style","null");
      })
    </script>
  </body>
</html>
